åŠ¹ç‡çš„ã«å®Ÿè£…ã™ã‚‹ãŸã‚ã®é †ç•ªã‚’ã”ææ¡ˆã—ã¾ã™ï¼

## å®Ÿè£…é †åºï¼ˆæ¨å¥¨ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç¤å®Ÿè£…ï¼ˆ1-2æ—¥ï¼‰
1. **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆé€£æº**
   - Google Sheets APIè¨­å®š
   - åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿æ©Ÿèƒ½

2. **Chatworké€šçŸ¥**
   - Chatwork APIè¨­å®š
   - åŸºæœ¬çš„ãªé€šçŸ¥æ©Ÿèƒ½

### ãƒ•ã‚§ãƒ¼ã‚º2: çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰
3. **Contact.tsxä¿®æ­£**
   - APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘¼ã³å‡ºã—
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

4. **å‹•ä½œãƒ†ã‚¹ãƒˆ**
   - ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒ†ã‚¹ãƒˆ
   - é€šçŸ¥ç¢ºèª

### ãƒ•ã‚§ãƒ¼ã‚º3: æ”¹å–„ãƒ»æœ€é©åŒ–ï¼ˆ1æ—¥ï¼‰
5. **é€šçŸ¥å†…å®¹ã®æ”¹å–„**
   - è¦‹ã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
   - é‡è¦æƒ…å ±ã®å¼·èª¿

6. **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å¼·åŒ–**
   - å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
   - ãƒ­ã‚°æ©Ÿèƒ½

## è©³ç´°ãªå®Ÿè£…æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Google Sheets APIè¨­å®š
```bash
# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install googleapis
```

1. Google Cloud Consoleã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. Google Sheets APIæœ‰åŠ¹åŒ–
3. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
4. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«æ¨©é™ä»˜ä¸

### ã‚¹ãƒ†ãƒƒãƒ—2: Chatwork APIè¨­å®š
1. Chatworkã§APIãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
2. é€šçŸ¥ç”¨ãƒ«ãƒ¼ãƒ IDç¢ºèª
3. ç’°å¢ƒå¤‰æ•°è¨­å®š

### ã‚¹ãƒ†ãƒƒãƒ—3: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
```typescript
// src/app/api/contact/route.ts
```

### ã‚¹ãƒ†ãƒƒãƒ—4: Contact.tsxä¿®æ­£
ç¾åœ¨ã®ãƒ‡ãƒ¢ç”¨ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã«å¤‰æ›´

## å„ã‚¹ãƒ†ãƒƒãƒ—ã®æ‰€è¦æ™‚é–“

- **ã‚¹ãƒ†ãƒƒãƒ—1**: 2-3æ™‚é–“ï¼ˆåˆå›è¨­å®šï¼‰
- **ã‚¹ãƒ†ãƒƒãƒ—2**: 30åˆ†
- **ã‚¹ãƒ†ãƒƒãƒ—3**: 2-3æ™‚é–“
- **ã‚¹ãƒ†ãƒƒãƒ—4**: 30åˆ†
- **ãƒ†ã‚¹ãƒˆ**: 1æ™‚é–“

**åˆè¨ˆ**: ç´„6-8æ™‚é–“ï¼ˆ1-2æ—¥ï¼‰

## æœ€åˆã«å–ã‚Šçµ„ã‚€ã¹ãã“ã¨

**ã‚¹ãƒ†ãƒƒãƒ—1ã®Google Sheets APIè¨­å®š**ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

ç†ç”±ï¼š
- è¨­å®šãŒæœ€ã‚‚è¤‡é›‘
- ä»–ã®æ©Ÿèƒ½ã®åŸºç›¤ã«ãªã‚‹
- ä¸€åº¦è¨­å®šã™ã‚Œã°å†åˆ©ç”¨å¯èƒ½

## Chatworké€£æºã®è©³ç´°ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—

### å‰ææ¡ä»¶
- **Chatworkæœ‰æ–™ãƒ—ãƒ©ãƒ³**ãŒå¿…è¦
- **ç®¡ç†è€…æ¨©é™**ãŒå¿…è¦
- **çµ„ç¹”ç®¡ç†è€…ã®æ‰¿èª**ãŒå¿…è¦

### ã‚¹ãƒ†ãƒƒãƒ—1: Chatwork APIè¨­å®š

#### 1-1. APIãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
1. **Chatworkã«ãƒ­ã‚°ã‚¤ãƒ³**
2. **å³ä¸Šã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³**ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **ã€Œè¨­å®šã€**ã‚’é¸æŠ
4. **å·¦å´ãƒ¡ãƒ‹ãƒ¥ãƒ¼**ã‹ã‚‰**ã€ŒAPIã€**ã‚’é¸æŠ
5. **ã€Œæ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ä½œæˆã€**ã‚’ã‚¯ãƒªãƒƒã‚¯
6. **ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼**ï¼ˆä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„ã®ã§æ³¨æ„ï¼‰

#### 1-2. ãƒ«ãƒ¼ãƒ IDç¢ºèª
1. **é€šçŸ¥ã‚’é€ã‚ŠãŸã„éƒ¨å±‹**ã«ç§»å‹•
2. **URLã‹ã‚‰ãƒ«ãƒ¼ãƒ IDã‚’ç¢ºèª**
   ```
   https://www.chatwork.com/#!rid123456789
   â†’ ãƒ«ãƒ¼ãƒ ID: 123456789
   ```

#### 1-3. æ¨©é™ç¢ºèª
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ¨©é™**ãŒã‚ã‚‹ã‹ç¢ºèª
- **APIé€ä¿¡æ¨©é™**ãŒã‚ã‚‹ã‹ç¢ºèª
- **çµ„ç¹”ç®¡ç†è€…ã®æ‰¿èª**ã‚’å–å¾—

### ã‚¹ãƒ†ãƒƒãƒ—2: ç’°å¢ƒå¤‰æ•°è¨­å®š

#### 2-1. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒè¨­å®š
```env
# .env.local ã«è¿½åŠ 
CHATWORK_API_TOKEN=your-api-token-here
CHATWORK_ROOM_ID=your-room-id-here
```

#### 2-2. Vercelç’°å¢ƒè¨­å®š
1. **Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ** â†’ **Settings** â†’ **Environment Variables**
3. **ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ **ï¼š
   - `CHATWORK_API_TOKEN`: APIãƒˆãƒ¼ã‚¯ãƒ³
   - `CHATWORK_ROOM_ID`: ãƒ«ãƒ¼ãƒ ID
4. **Environment**: Production, Preview, Development ã™ã¹ã¦ã«ãƒã‚§ãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—3: Chatworké€ä¿¡é–¢æ•°ä½œæˆ

#### 3-1. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
```typescript
// src/lib/chatwork.ts
export async function sendChatworkMessage(message: string) {
  const apiToken = process.env.CHATWORK_API_TOKEN;
  const roomId = process.env.CHATWORK_ROOM_ID;

  if (!apiToken || !roomId) {
    throw new Error('Chatwork APIè¨­å®šãŒä¸å®Œå…¨ã§ã™');
  }

  try {
    const response = await fetch(`https://api.chatwork.com/v2/rooms/${roomId}/messages`, {
      method: 'POST',
      headers: {
        'X-ChatWorkToken': apiToken,
        'Content-Type': 'application/x-www-form-urlencoded',
      },
      body: `body=${encodeURIComponent(message)}`
    });

    if (!response.ok) {
      throw new Error(`Chatwork API ã‚¨ãƒ©ãƒ¼: ${response.status}`);
    }

    return await response.json();
  } catch (error) {
    console.error('Chatworké€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);
    throw error;
  }
}
```

#### 3-2. é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```typescript
// ãŠå•ã„åˆã‚ã›ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
export function createContactMessage(formData: any) {
  const interests = Object.entries(formData.interests)
    .filter(([_, checked]) => checked)
    .map(([key, _]) => {
      const interestMap: { [key: string]: string } = {
        sns: 'SNSé‹ç”¨',
        ads: 'åºƒå‘Šé‹ç”¨',
        video: 'å‹•ç”»åˆ¶ä½œ',
        ai: 'AIæ´»ç”¨',
        analytics: 'åˆ†æ',
        education: 'æ•™è‚²'
      };
      return interestMap[key] || key;
    })
    .join(', ');

  return `
ã€æ–°è¦ãŠå•ã„åˆã‚ã›ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ åŸºæœ¬æƒ…å ±
ä¼šç¤¾å: ${formData.company}
æ‹…å½“è€…: ${formData.name}
ãƒ¡ãƒ¼ãƒ«: ${formData.email}

ğŸ’° äºˆç®—: ${formData.budget}
ğŸ¯ èˆˆå‘³é ˜åŸŸ: ${interests}
ğŸ“… å¸Œæœ›é–‹å§‹æ™‚æœŸ: ${formData.startDate}

ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
${formData.message}

ğŸ”— å‚è€ƒURL: ${formData.referenceUrl || 'ãªã—'}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é€ä¿¡æ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}
  `.trim();
}
```

### ã‚¹ãƒ†ãƒƒãƒ—4: æ—¢å­˜APIã«çµ±åˆ

#### 4-1. ãŠå•ã„åˆã‚ã›APIä¿®æ­£
```typescript
// src/app/api/contact/route.ts ã«è¿½åŠ 
import { sendChatworkMessage, createContactMessage } from '@/lib/chatwork';

export async function POST(request: Request) {
  try {
    const formData = await request.json();
    
    // Google Sheetsã«ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...

    // Chatworkã«é€šçŸ¥é€ä¿¡
    try {
      const message = createContactMessage(formData);
      await sendChatworkMessage(message);
      console.log('Chatworké€šçŸ¥é€ä¿¡æˆåŠŸ');
    } catch (chatworkError) {
      console.error('Chatworké€šçŸ¥é€ä¿¡å¤±æ•—:', chatworkError);
      // Chatworké€ä¿¡å¤±æ•—ã§ã‚‚ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã¯æˆåŠŸã¨ã™ã‚‹
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    // ... æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ...
  }
}
```

#### 4-2. è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰APIä¿®æ­£
```typescript
// src/app/api/download/route.ts ã«è¿½åŠ 
import { sendChatworkMessage } from '@/lib/chatwork';

export async function POST(request: Request) {
  try {
    const formData = await request.json();
    
    // Google Sheetsã«ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...

    // Chatworkã«é€šçŸ¥é€ä¿¡
    try {
      const message = `
ã€è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç”³è«‹ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ åŸºæœ¬æƒ…å ±
ä¼šç¤¾å: ${formData.company}
ãŠåå‰: ${formData.name}
ãƒ¡ãƒ¼ãƒ«: ${formData.email}

ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
${formData.message || 'ãªã—'}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç”³è«‹æ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}
      `.trim();
      
      await sendChatworkMessage(message);
      console.log('Chatworké€šçŸ¥é€ä¿¡æˆåŠŸ');
    } catch (chatworkError) {
      console.error('Chatworké€šçŸ¥é€ä¿¡å¤±æ•—:', chatworkError);
      // Chatworké€ä¿¡å¤±æ•—ã§ã‚‚ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã¯æˆåŠŸã¨ã™ã‚‹
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    // ... æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ...
  }
}
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ†ã‚¹ãƒˆãƒ»å‹•ä½œç¢ºèª

#### 5-1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
1. **ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª**
2. **ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒ†ã‚¹ãƒˆ**
3. **Chatworké€šçŸ¥ç¢ºèª**

#### 5-2. æœ¬ç•ªç’°å¢ƒãƒ†ã‚¹ãƒˆ
1. **Vercelç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª**
2. **ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®å‹•ä½œç¢ºèª**
3. **é€šçŸ¥å†…å®¹ç¢ºèª**

### ã‚¹ãƒ†ãƒƒãƒ—6: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

#### 6-1. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
```typescript
// Chatworké€ä¿¡å¤±æ•—æ™‚ã®å‡¦ç†
try {
  await sendChatworkMessage(message);
} catch (chatworkError) {
  console.error('Chatworké€ä¿¡å¤±æ•—:', chatworkError);
  
  // ä»£æ›¿é€šçŸ¥ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ãªã©ï¼‰
  // await sendEmailNotification(formData);
  
  // ãƒ­ã‚°è¨˜éŒ²
  // await logError('chatwork_send_failed', chatworkError);
}
```

#### 6-2. ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
```typescript
// ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãé€ä¿¡
async function sendWithRetry(message: string, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await sendChatworkMessage(message);
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
}
```

## å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹

### 1. æ¨©é™ç®¡ç†
- **APIãƒˆãƒ¼ã‚¯ãƒ³**ã¯æ©Ÿå¯†æƒ…å ±ã¨ã—ã¦ç®¡ç†
- **ç’°å¢ƒå¤‰æ•°**ã§å®‰å…¨ã«è¨­å®š
- **Git**ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„

### 2. ã‚¨ãƒ©ãƒ¼å‡¦ç†
- **Chatworké€ä¿¡å¤±æ•—**ã§ã‚‚ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã¯æˆåŠŸã¨ã™ã‚‹
- **é©åˆ‡ãªãƒ­ã‚°è¨˜éŒ²**ã‚’è¡Œã†
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†**ã‚’æº–å‚™

### 3. é€šçŸ¥å†…å®¹
- **è¦‹ã‚„ã™ã„å½¢å¼**ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆ
- **é‡è¦æƒ…å ±**ã‚’å¼·èª¿
- **é©åˆ‡ãªæ–‡å­—æ•°**ã«èª¿æ•´

## å®Ÿè£…å®Œäº†å¾Œã®é‹ç”¨

### 1. å®šæœŸç¢ºèª
- **é€šçŸ¥ã®åˆ°é”ç¢ºèª**
- **APIåˆ¶é™**ã®ç¢ºèª
- **ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°**ã®ç¢ºèª

### 2. æ”¹å–„ãƒ»æœ€é©åŒ–
- **é€šçŸ¥å†…å®¹**ã®æ”¹å–„
- **é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**ã®æœ€é©åŒ–
- **ã‚¨ãƒ©ãƒ¼å‡¦ç†**ã®å¼·åŒ–

ã©ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰è©³ã—ãèª¬æ˜ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ





